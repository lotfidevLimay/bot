"use strict";
// Copyright (c) Wictor WilÃ©n. All rights reserved.
// Licensed under the MIT license.
// SPDX-License-Identifier: MIT
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadPlugins = void 0;
const fancy_log_1 = __importDefault(require("fancy-log"));
const findup_sync_1 = __importDefault(require("findup-sync"));
/**
 * Loads additional plugins for yoteams
 * @param gulp
 * @param config
 */
const loadPlugins = (gulp, config) => {
    if (require.main) {
        const packagePath = (0, findup_sync_1.default)("package.json");
        if (packagePath) {
            const pkg = require(packagePath);
            if (pkg) {
                const modules = Object.keys(pkg.devDependencies);
                for (const module of modules) {
                    if (module.startsWith("yoteams-") && module !== "yoteams-build-core") {
                        (0, fancy_log_1.default)(`Found additional Yo Teams plugin: ${module}`);
                        const plugin = require(module);
                        plugin.setup(gulp, config);
                    }
                }
            }
        }
    }
};
exports.loadPlugins = loadPlugins;
