"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.felaInvokeKeyframesPlugin = void 0;
var styles_1 = require("@fluentui/styles");
var _ = require("lodash");
/**
 * Fela plugin for invoking keyframes with params. The keyframes, defined in the animationName prop,
 * are called with the params object, if defined in the animationName prop.
 *
 * Caution! Infinite recursion is possible in case if style object has links to self in the props
 * tree.
 */
var felaInvokeKeyframesPlugin = function (styles) {
    return Object.keys(styles).reduce(function (acc, cssPropertyName) {
        var cssPropertyValue = styles[cssPropertyName];
        if (_.isPlainObject(cssPropertyValue)) {
            if (cssPropertyName === 'animationName') {
                var animationDefinition = cssPropertyValue;
                if (animationDefinition.keyframe) {
                    styles[cssPropertyName] = styles_1.callable(animationDefinition.keyframe)(animationDefinition.params || {});
                }
                acc[cssPropertyName] = styles[cssPropertyName];
                return acc;
            }
            // Without casting to any TSC gives "Expression produces a union type that is too complex to represent" error
            acc[cssPropertyName] = exports.felaInvokeKeyframesPlugin(cssPropertyValue);
            return acc;
        }
        acc[cssPropertyName] = styles[cssPropertyName];
        return acc;
    }, {});
};
exports.felaInvokeKeyframesPlugin = felaInvokeKeyframesPlugin;
