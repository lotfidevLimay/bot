{"version":3,"sources":["components/Dropdown/Dropdown.tsx"],"names":["dropdownClassName","dropdownSlotClassNames","clearIndicator","container","toggleIndicator","item","itemsCount","itemsList","searchInput","selectedItem","selectedItems","triggerButton","a11yStatusCleanupTime","charKeyPressedCleanupTime","normalizeValue","multiple","rawValue","normalizedValue","Array","isArray","slice","getFilteredValues","options","items","itemToString","itemToValue","search","searchQuery","value","filteredItemsByValue","filteredItemStrings","filteredItem","toLowerCase","filteredItems","filter","indexOf","isEmpty","prop","props","Dropdown","React","forwardRef","ref","context","displayName","telemetry","setStart","setEnd","ariaLabelledby","ariaDescribedby","ariaInvalid","clearable","checkable","checkableIndicator","className","design","disabled","error","fluid","getA11ySelectionMessage","a11ySelectedItemsMessage","getA11yStatusMessage","inline","inverted","highlightFirstItemOnOpen","headerMessage","moveFocusOnTab","noResultsMessage","loading","loadingMessage","placeholder","renderItem","renderSelectedItem","styles","variables","align","flipBoundary","overflowBoundary","position","positionFixed","offset","unstable_disableTether","unstable_pinned","autoSize","list","positioningProps","buttonRef","useRef","inputRef","listRef","selectedItemsRef","containerRef","defaultTriggerButtonId","useMemo","selectedItemsCountNarrationId","ElementType","unhandledProps","handledProps","defaultValue","defaultActiveSelectedIndex","initialValue","undefined","activeSelectedIndex","setActiveSelectedIndex","defaultHighlightedIndex","highlightedIndex","setHighlightedIndex","defaultOpen","open","setOpen","defaultSearchQuery","setSearchQuery","setValue","useState","a11ySelectionStatus","setA11ySelectionStatus","focused","setFocused","isFromKeyboard","setIsFromKeyboard","itemIsFromKeyboard","setItemIsFromKeyboard","startingString","setStartingString","mapPropsToStyles","isEmptyClearIndicator","hasToggleIndicator","hasItemsSelected","length","mapPropsToInlineStyles","rtl","classes","resolvedStyles","popperRef","useLayoutEffect","current","updatePosition","clearA11ySelectionMessage","clearStartingString","handleChange","e","handleOnBlur","target","renderTriggerButton","getToggleButtonProps","content","getSelectedItemAsString","triggerButtonId","triggerButtonProps","onFocus","handleTriggerButtonOrListFocus","onBlur","handleTriggerButtonBlur","onKeyDown","handleTriggerButtonKeyDown","onClick","restTriggerButtonProps","Button","defaultProps","id","overrideProps","predefinedProps","renderSearchInput","accessibilityComboboxProps","getInputProps","selectItemAtIndex","toggleMenu","noPlaceholder","DropdownSearchInput","create","handleSearchInputOverrides","renderSelectedItemsCountNarration","narration","screenReaderContainerStyles","renderItemsList","getMenuProps","getItemProps","renderItems","refKey","suppressRefError","innerRef","accessibilityMenuProps","accessibilityInputProps","handleListKeyDown","listElement","List","tabIndex","listProps","handleListBlur","footerItem","renderItemsListFooter","headerItem","renderItemsListHeader","index","children","selected","DropdownItem","active","hasOwnProperty","key","header","handleItemOverrides","render","push","selectedItemsCountNarration","renderSelectedItems","map","DropdownSelectedItem","isSelectedItemActive","handleSelectedItemOverrides","downshiftStateReducer","state","changes","activeElement","type","Downshift","stateChangeTypes","blurButton","isOpen","handleInputValueChange","inputValue","stateAndHelpers","itemSelected","setStateAndInvokeHandler","handleStateChange","newState","changeInput","shouldValueChange","shouldMenuClose","keyDownEnter","clickItem","shouldAddHighlightedIndex","isSameItemSelected","newValue","onAdd","setA11ySelectionMessage","defaultView","setTimeout","scrollTop","scrollHeight","tryFocusTriggerButton","keyDownEscape","keyDownArrowDown","keyDownArrowUp","highlightedIndexOnArrowKeyOpen","getHighlightedIndexOnArrowKeyOpen","focus","mouseUp","clickButton","keyDownSpaceButton","itemMouseEnter","unknown","handlers","Boolean","accessibilityItemProps","stopPropagation","nativeEvent","stopImmediatePropagation","onRemove","dropdownSelectedItemProps","handleSelectedItemRemove","handleSelectedItemKeyDown","handleInputBlur","searchInputProps","handleInputKeyDown","keyboardKey","Home","End","Tab","handleTabSelection","ArrowLeft","trySetLastSelectedItemAsActive","ArrowRight","Backspace","tryRemoveItemFromValue","Escape","onChange","node","onInputBlur","onInputKeyDown","preventDefault","selectionStart","selectionEnd","removeItemFromValue","handleClear","tryFocusSearchInput","handleContainerClick","accessibilityInputPropsKeyDown","keyCode","keyString","String","fromCharCode","test","setHighlightedIndexOnCharKeyDown","previousKey","nextKey","Delete","relatedTarget","newStartingString","newHighlightedIndex","startsWith","poppedItem","currentElement","pop","handlerNames","event","proposedValue","forEach","handlerName","isArrowUp","isArrowDown","itemsLength","useEffect","cancel","element","root","process","env","NODE_ENV","menu","nodeToScroll","actions","boundary","scrollMode","block","el","top","left","scrollLeft","getRootProps","accessibilityRootPropsRest","showClearIndicator","Box","accessibility","indicatorBehavior","role","propTypes","commonPropTypes","createCommon","PropTypes","number","bool","customPropTypes","shorthandAllowingChildren","string","oneOfType","itemShorthand","collectionShorthand","object","func","onOpenChange","onSearchQueryChange","onActiveSelectedIndexChange","onHighlightedIndexChange","oneOf","ALIGNMENTS","arrayOf","POSITIONS","AUTOSIZES","Object","keys","isValidElement","Item","SearchInput","SelectedItem"],"mappings":"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","sourcesContent":["import {\n  getElementType,\n  useAutoControlled,\n  useStyles,\n  useUnhandledProps,\n  useFluentContext,\n  useTelemetry,\n  ForwardRefWithAs,\n  useMergedRefs,\n} from '@fluentui/react-bindings';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { indicatorBehavior, AccessibilityAttributes, getCode, keyboardKey } from '@fluentui/accessibility';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport cx from 'classnames';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nimport { ShorthandRenderFunction, ShorthandValue, ShorthandCollection, FluentComponentStaticProps } from '../../types';\nimport Downshift, {\n  DownshiftState,\n  StateChangeOptions,\n  A11yStatusMessageOptions,\n  GetMenuPropsOptions,\n  GetPropsCommonOptions,\n  GetInputPropsOptions,\n  GetToggleButtonPropsOptions,\n  GetItemPropsOptions,\n  ControllerStateAndHelpers,\n} from 'downshift';\nimport {\n  commonPropTypes,\n  UIComponentProps,\n  isFromKeyboard as detectIsFromKeyboard,\n  createShorthand,\n} from '../../utils';\nimport { List, ListProps } from '../List/List';\nimport { DropdownItem, DropdownItemProps } from './DropdownItem';\nimport { DropdownSelectedItem, DropdownSelectedItemProps } from './DropdownSelectedItem';\nimport { DropdownSearchInput, DropdownSearchInputProps } from './DropdownSearchInput';\nimport { Button, ButtonProps } from '../Button/Button';\nimport { screenReaderContainerStyles } from '../../utils/accessibility/Styles/accessibilityStyles';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Portal } from '../Portal/Portal';\nimport {\n  ALIGNMENTS,\n  POSITIONS,\n  Popper,\n  PositioningProps,\n  PopperShorthandProps,\n  partitionPopperPropsFromShorthand,\n  AutoSize,\n  AUTOSIZES,\n} from '../../utils/positioner';\nimport { CloseIcon, ChevronDownIcon } from '@fluentui/react-icons-northstar';\n\nexport interface DownshiftA11yStatusMessageOptions<Item> extends Required<A11yStatusMessageOptions<Item>> {}\n\nexport interface DropdownSlotClassNames {\n  clearIndicator: string;\n  container: string;\n  toggleIndicator: string;\n  item: string;\n  itemsCount: string;\n  itemsList: string;\n  searchInput: string;\n  selectedItem: string;\n  selectedItems: string;\n  triggerButton: string;\n}\n\nexport interface DropdownProps extends UIComponentProps<DropdownProps>, PositioningProps {\n  /** The index of the currently selected item, if the dropdown supports multiple selection. */\n  activeSelectedIndex?: number;\n\n  /** Identifies the element (or elements) that labels the current element. Will be passed to `triggerButton`. */\n  'aria-labelledby'?: AccessibilityAttributes['aria-labelledby'];\n  'aria-describedby'?: AccessibilityAttributes['aria-describedby'];\n\n  /** Indicates the entered value does not conform to the format expected by the application. Will be passed to `triggerButton`. */\n  'aria-invalid'?: AccessibilityAttributes['aria-invalid'];\n\n  /** A dropdown item can show a check indicator if it is selected. */\n  checkable?: boolean;\n\n  /** A slot for a selected indicator in the dropdown list. */\n  checkableIndicator?: ShorthandValue<BoxProps>;\n\n  /** A dropdown can be clearable to let users remove their selection. */\n  clearable?: boolean;\n\n  /** A slot for the clearing indicator. */\n  clearIndicator?: ShorthandValue<BoxProps>;\n\n  /** The initial value for the index of the currently selected item in a multiple selection. */\n  defaultActiveSelectedIndex?: number;\n\n  /** The initial value for 'open' in uncontrolled mode. */\n  defaultOpen?: boolean;\n\n  /** The initial list item index to highlight. */\n  defaultHighlightedIndex?: number;\n\n  /** The initial value for the search query if the dropdown has `search` enabled. */\n  defaultSearchQuery?: string;\n\n  /** The initial value (or value array if the array has multiple selection). */\n  defaultValue?: ShorthandValue<DropdownItemProps> | ShorthandCollection<DropdownItemProps>;\n\n  /** A dropdown can show that it cannot be interacted with. */\n  disabled?: boolean;\n\n  /** A dropdown can fill the width of its container. */\n  fluid?: boolean;\n\n  /** Object with callbacks for generating announcements for item selection and removal. */\n  getA11ySelectionMessage?: {\n    /**\n     * Callback that creates custom accessibility message a screen reader narrates on item added to selection.\n     * @param item - Dropdown added element.\n     */\n    onAdd?: (item: ShorthandValue<DropdownItemProps>) => string;\n    /**\n     * Callback that creates custom accessibility message a screen reader narrates on item removed from selection.\n     * @param item - Dropdown removed element.\n     */\n    onRemove?: (item: ShorthandValue<DropdownItemProps>) => string;\n    /**\n     * Callback that creates custom accessibility message about the selected items count a screen reader narrates on input field focus.\n     * @param count - number of items selected.\n     */\n    itemsCount?: (count: number) => string;\n  };\n\n  /** A label for selected items listbox. */\n  a11ySelectedItemsMessage?: string;\n\n  /**\n   * Callback that provides status announcement message with number of items in the list, using Arrow Up/Down keys to navigate through them and, if multiple, using Arrow Left/Right to navigate through selected items.\n   * @param messageGenerationProps - Object with properties to generate message from. See getA11yStatusMessage from Downshift repo.\n   */\n  getA11yStatusMessage?: (options: DownshiftA11yStatusMessageOptions<ShorthandValue<DropdownItemProps>>) => string;\n\n  /** A dropdown can highlight the first option when it opens. */\n  highlightFirstItemOnOpen?: boolean;\n\n  /** The index of the list item to highlight. */\n  highlightedIndex?: number;\n\n  /** A dropdown can be formatted to appear inline next to other elements. */\n  inline?: boolean;\n\n  /** A dropdown can have inverted colors. */\n  inverted?: boolean;\n\n  /** Array of props for generating list options (Dropdown.Item[]) and selected item labels (Dropdown.SelectedItem[]), if it's a multiple selection. */\n  items?: ShorthandCollection<DropdownItemProps>;\n\n  /**\n   * A function that converts an item to string. Used when dropdown has `search` enabled.\n   * By default, it:\n   * - returns the `header` property if it exists on an item\n   * - stringifies the item if it is a primitive type\n   */\n  itemToString?: (item: ShorthandValue<DropdownItemProps>) => string;\n\n  /** Used when comparing two items in multiple selection. Default comparison is by the header prop. */\n  itemToValue?: (item: ShorthandValue<DropdownItemProps>) => any;\n\n  /** A message to be displayed in the list header. */\n  headerMessage?: ShorthandValue<DropdownItemProps>;\n\n  /** A slot for dropdown list. */\n  list?: ShorthandValue<ListProps & { popper?: PopperShorthandProps }>;\n\n  /** A dropdown can show that it is currently loading data. */\n  loading?: boolean;\n\n  /** A message to be displayed in the list when the dropdown is loading. */\n  loadingMessage?: ShorthandValue<DropdownItemProps>;\n\n  /** When selecting an element with Tab, focus stays on the dropdown by default. If true, the focus will jump to next/previous element in DOM. Only available to multiple selection dropdowns. */\n  moveFocusOnTab?: boolean;\n\n  /** A dropdown can allow a user to select multiple items. */\n  multiple?: boolean;\n\n  /** A message to be displayed in the list when the dropdown has no items. */\n  noResultsMessage?: ShorthandValue<DropdownItemProps>;\n\n  /**\n   * Called when the dropdown's selected items index change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onActiveSelectedIndexChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's highlighted index change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onHighlightedIndexChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown opens or closes.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `open` reflecting the new open state.\n   */\n  onOpenChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's search query changes.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `searchQuery` reflecting its new value.\n   */\n  onSearchQueryChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's selected item(s) change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the focus moves out from dropdown.\n   * @param event - React's original SyntheticEvent.\n   */\n  onBlur?: (event: React.FocusEvent | null) => void;\n\n  /** A dropdown's open state can be controlled. */\n  open?: boolean;\n\n  /** A placeholder message for the input field. */\n  placeholder?: string;\n\n  /**\n   * A render function to customize how items are rendered in the dropdown.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderItem?: ShorthandRenderFunction<DropdownItemProps>;\n\n  /**\n   * A custom render function for the selected item. Only applicable with the `multiple` prop.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderSelectedItem?: ShorthandRenderFunction<DropdownSelectedItemProps>;\n\n  /** A dropdown can have a search field instead of trigger button. Can receive a custom search function that will replace the default equivalent. */\n  search?:\n    | boolean\n    | ((items: ShorthandCollection<DropdownItemProps>, searchQuery: string) => ShorthandCollection<DropdownItemProps>);\n\n  /** A search dropdown's input can be customized. */\n  searchInput?: ShorthandValue<DropdownSearchInputProps>;\n\n  /** Sets search query value (controlled mode). */\n  searchQuery?: string;\n\n  /** Controls the appearance of the indicator that shows/hides the list of items. */\n  toggleIndicator?: ShorthandValue<BoxProps>;\n\n  /** Controls the appearance of the trigger button if it's a selection dropdown (not a search). */\n  triggerButton?: ShorthandValue<ButtonProps>;\n\n  /** Sets the dropdown's currently selected value(s) in controlled mode. */\n  value?: ShorthandValue<DropdownItemProps> | ShorthandCollection<DropdownItemProps>;\n\n  /** Dropdown can have errors status  */\n  error?: boolean;\n}\n\nexport type DropdownStylesProps = Required<\n  Pick<DropdownProps, 'disabled' | 'error' | 'fluid' | 'inline' | 'inverted' | 'multiple' | 'position' | 'open'>\n> & {\n  focused: boolean;\n  isEmptyClearIndicator: boolean;\n  hasToggleIndicator: boolean;\n  isFromKeyboard: boolean;\n  search: boolean;\n  hasItemsSelected: boolean;\n};\n\ntype DropdownStateForInvoke = {\n  activeSelectedIndex?: number | null;\n  highlightedIndex?: number | null;\n  itemIsFromKeyboard?: boolean;\n  open?: boolean;\n  searchQuery?: string;\n  value?: ShorthandCollection<DropdownItemProps>;\n};\n\nexport const dropdownClassName = 'ui-dropdown';\nexport const dropdownSlotClassNames: DropdownSlotClassNames = {\n  clearIndicator: `${dropdownClassName}__clear-indicator`,\n  container: `${dropdownClassName}__container`,\n  toggleIndicator: `${dropdownClassName}__toggle-indicator`,\n  item: `${dropdownClassName}__item`,\n  itemsCount: `${dropdownClassName}__items-count`,\n  itemsList: `${dropdownClassName}__items-list`,\n  searchInput: `${dropdownClassName}__searchinput`,\n  selectedItem: `${dropdownClassName}__selecteditem`,\n  selectedItems: `${dropdownClassName}__selected-items`,\n  triggerButton: `${dropdownClassName}__trigger-button`,\n};\n\nconst a11yStatusCleanupTime = 500;\nconst charKeyPressedCleanupTime = 500;\n\n/** `normalizedValue` should be normalized always as it can be received from props */\nfunction normalizeValue(multiple: boolean, rawValue: DropdownProps['value']): ShorthandCollection<DropdownItemProps> {\n  const normalizedValue = Array.isArray(rawValue) ? rawValue : [rawValue];\n\n  return multiple ? normalizedValue : normalizedValue.slice(0, 1);\n}\n\n/**\n * Used to compute the filtered items (by value and search query) and, if needed,\n * their string equivalents, in order to be used throughout the component.\n */\nfunction getFilteredValues(\n  options: Required<\n    Pick<DropdownProps, 'multiple' | 'items' | 'itemToValue' | 'itemToString' | 'search' | 'searchQuery'>\n  > & {\n    value: ShorthandCollection<DropdownItemProps>;\n  },\n) {\n  const { items, itemToString, itemToValue, multiple, search, searchQuery, value } = options;\n\n  const filteredItemsByValue = multiple ? _.differenceBy(items, value, itemToValue) : items;\n  const filteredItemStrings = _.map(filteredItemsByValue, filteredItem => itemToString(filteredItem).toLowerCase());\n\n  if (search) {\n    if (_.isFunction(search)) {\n      return {\n        filteredItems: search(filteredItemsByValue, searchQuery),\n        filteredItemStrings,\n      };\n    }\n\n    return {\n      filteredItems: filteredItemsByValue.filter(\n        item => itemToString(item).toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1,\n      ),\n      filteredItemStrings,\n    };\n  }\n\n  return {\n    filteredItems: filteredItemsByValue,\n    filteredItemStrings,\n  };\n}\n\nconst isEmpty = prop => {\n  return typeof prop === 'object' && !prop.props && !_.get(prop, 'children') && !_.get(prop, 'content');\n};\n\n/**\n * A Dropdown allows user to select one or more values from a list of options.\n * Can be created with search and multi-selection capabilities.\n *\n * @accessibility\n * Implements [ARIA Combo Box](https://www.w3.org/TR/wai-aria-practices-1.1/#combobox) design pattern, uses aria-live to announce state changes.\n * @accessibilityIssues\n * [Issue 991203: VoiceOver doesn't narrate properly elements in the input/combobox](https://bugs.chromium.org/p/chromium/issues/detail?id=991203)\n * [JAWS - ESC (ESCAPE) not closing collapsible listbox (dropdown) on first time #528](https://github.com/FreedomScientific/VFO-standards-support/issues/528)\n */\nexport const Dropdown = (React.forwardRef<HTMLDivElement, DropdownProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Dropdown.displayName, context.telemetry);\n\n  setStart();\n\n  const {\n    'aria-labelledby': ariaLabelledby,\n    'aria-describedby': ariaDescribedby,\n    'aria-invalid': ariaInvalid,\n    clearable,\n    clearIndicator,\n    checkable,\n    checkableIndicator,\n    className,\n    design,\n    disabled,\n    error,\n    fluid,\n    getA11ySelectionMessage,\n    a11ySelectedItemsMessage,\n    getA11yStatusMessage,\n    inline,\n    inverted,\n    itemToString,\n    itemToValue,\n    items,\n    highlightFirstItemOnOpen,\n    multiple,\n    headerMessage,\n    moveFocusOnTab,\n    noResultsMessage,\n    loading,\n    loadingMessage,\n    placeholder,\n    renderItem,\n    renderSelectedItem,\n    search,\n    searchInput,\n    styles,\n    toggleIndicator,\n    triggerButton,\n    variables,\n  } = props;\n\n  const {\n    align,\n    flipBoundary,\n    overflowBoundary,\n    position,\n    positionFixed,\n    offset,\n    unstable_disableTether,\n    unstable_pinned,\n    autoSize,\n  } = props; // PositioningProps passed directly to Dropdown\n  const [list, positioningProps] = partitionPopperPropsFromShorthand(props.list); // PositioningProps passed to Dropdown `list` prop's `popper` key\n\n  const buttonRef = React.useRef<HTMLElement>();\n  const inputRef = React.useRef<HTMLInputElement | undefined>() as React.MutableRefObject<HTMLInputElement | undefined>;\n  const listRef = React.useRef<HTMLElement>();\n  const selectedItemsRef = React.useRef<HTMLDivElement>();\n  const containerRef = React.useRef<HTMLDivElement>();\n\n  const defaultTriggerButtonId = React.useMemo(() => _.uniqueId('dropdown-trigger-button-'), []);\n  const selectedItemsCountNarrationId = React.useMemo(() => _.uniqueId('dropdown-selected-items-count-'), []);\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Dropdown.handledProps, props);\n\n  const [activeSelectedIndex, setActiveSelectedIndex] = useAutoControlled<number | null | undefined>({\n    defaultValue: props.defaultActiveSelectedIndex,\n    initialValue: multiple ? null : undefined,\n    value: props.activeSelectedIndex,\n  });\n  const [highlightedIndex, setHighlightedIndex] = useAutoControlled<number | null>({\n    defaultValue: props.defaultHighlightedIndex,\n    initialValue: highlightFirstItemOnOpen ? 0 : null,\n    value: props.highlightedIndex,\n  });\n  const [open, setOpen] = useAutoControlled({\n    defaultValue: props.defaultOpen,\n    initialValue: false,\n    value: props.open,\n  });\n  const [searchQuery, setSearchQuery] = useAutoControlled<string | undefined>({\n    defaultValue: props.defaultSearchQuery,\n    initialValue: search ? '' : undefined,\n    value: props.searchQuery,\n  });\n  const [rawValue, setValue] = useAutoControlled({\n    defaultValue: props.defaultValue,\n    initialValue: [],\n    value: props.value,\n  });\n  const value = normalizeValue(multiple, rawValue);\n\n  const [a11ySelectionStatus, setA11ySelectionStatus] = React.useState('');\n  const [focused, setFocused] = React.useState(false);\n  const [isFromKeyboard, setIsFromKeyboard] = React.useState(false);\n  const [itemIsFromKeyboard, setItemIsFromKeyboard] = React.useState(false);\n  const [startingString, setStartingString] = React.useState<string | undefined>(search ? undefined : '');\n\n  const { filteredItems, filteredItemStrings } = getFilteredValues({\n    itemToString,\n    itemToValue,\n    items,\n    multiple,\n    search,\n    searchQuery,\n    value,\n  });\n\n  const { classes, styles: resolvedStyles } = useStyles<DropdownStylesProps>(Dropdown.displayName, {\n    className: dropdownClassName,\n    mapPropsToStyles: () => ({\n      disabled,\n      error,\n      fluid,\n      focused,\n      isEmptyClearIndicator: isEmpty(clearIndicator),\n      hasToggleIndicator: !!toggleIndicator,\n      inline,\n      inverted,\n      isFromKeyboard,\n      multiple,\n      open,\n      position: positioningProps?.position ?? position,\n      search: !!search,\n      hasItemsSelected: value.length > 0,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const popperRef = useMergedRefs(props.popperRef);\n\n  React.useLayoutEffect(() => {\n    popperRef.current?.updatePosition();\n  }, [filteredItems?.length, popperRef]);\n\n  const clearA11ySelectionMessage = React.useMemo(\n    () =>\n      _.debounce(() => {\n        setA11ySelectionStatus('');\n      }, a11yStatusCleanupTime),\n    [],\n  );\n  const clearStartingString = React.useMemo(\n    () =>\n      _.debounce(() => {\n        setStartingString('');\n      }, charKeyPressedCleanupTime),\n    [],\n  );\n\n  const handleChange = (e: React.SyntheticEvent) => {\n    // Dropdown component doesn't present any `input` component in markup, however all of our\n    // components should handle events transparently.\n    _.invoke(props, 'onChange', e, { ...props, value });\n  };\n\n  const handleOnBlur = (e: React.SyntheticEvent) => {\n    // Dropdown component doesn't present any `input` component in markup, however all of our\n    // components should handle events transparently.\n    if (e.target !== buttonRef.current) {\n      _.invoke(props, 'onBlur', e, props);\n    }\n  };\n\n  const renderTriggerButton = (getToggleButtonProps: (options?: GetToggleButtonPropsOptions) => any): JSX.Element => {\n    const content = getSelectedItemAsString(value[0]);\n    const triggerButtonId = triggerButton['id'] || defaultTriggerButtonId;\n\n    const triggerButtonProps = getToggleButtonProps({\n      disabled,\n      onFocus: handleTriggerButtonOrListFocus,\n      onBlur: handleTriggerButtonBlur,\n      onKeyDown: e => {\n        handleTriggerButtonKeyDown(e);\n      },\n      'aria-invalid': ariaInvalid,\n      'aria-label': undefined,\n      ...(ariaLabelledby && { 'aria-labelledby': ariaLabelledby }),\n      ...(open && { 'aria-expanded': true }),\n    });\n\n    const { onClick, onFocus, onBlur, onKeyDown, ...restTriggerButtonProps } = triggerButtonProps;\n\n    return (\n      <Ref innerRef={buttonRef}>\n        {createShorthand(Button, triggerButton, {\n          defaultProps: () => ({\n            className: dropdownSlotClassNames.triggerButton,\n            content,\n            disabled,\n            id: triggerButtonId,\n            fluid: true,\n            styles: resolvedStyles.triggerButton,\n            ...restTriggerButtonProps,\n          }),\n          overrideProps: (predefinedProps: ButtonProps) => ({\n            onClick: e => {\n              onClick(e);\n              _.invoke(predefinedProps, 'onClick', e, predefinedProps);\n            },\n            onFocus: e => {\n              onFocus(e);\n              _.invoke(predefinedProps, 'onFocus', e, predefinedProps);\n            },\n            onBlur: e => {\n              if (!disabled) {\n                onBlur(e);\n              }\n\n              _.invoke(predefinedProps, 'onBlur', e, predefinedProps);\n            },\n            onKeyDown: e => {\n              if (!disabled) {\n                onKeyDown(e);\n              }\n\n              _.invoke(predefinedProps, 'onKeyDown', e, predefinedProps);\n            },\n          }),\n        })}\n      </Ref>\n    );\n  };\n\n  const renderSearchInput = (\n    accessibilityComboboxProps: Object,\n    highlightedIndex: number,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n    selectItemAtIndex: (index: number, otherStateToSet?: Partial<StateChangeOptions<any>>, cb?: () => void) => void,\n    toggleMenu: () => void,\n    variables,\n  ): JSX.Element => {\n    const noPlaceholder = searchQuery.length > 0 || (multiple && value.length > 0);\n\n    return DropdownSearchInput.create(searchInput || {}, {\n      defaultProps: () => ({\n        className: dropdownSlotClassNames.searchInput,\n        placeholder: noPlaceholder ? '' : placeholder,\n        inline,\n        variables,\n        disabled,\n      }),\n      overrideProps: handleSearchInputOverrides(\n        highlightedIndex,\n        selectItemAtIndex,\n        toggleMenu,\n        accessibilityComboboxProps,\n        getInputProps,\n      ),\n    });\n  };\n\n  const renderSelectedItemsCountNarration = id => {\n    // Get narration only if callback is provided, at least one item is selected and only in multiple case\n    if (!getA11ySelectionMessage || !getA11ySelectionMessage.itemsCount || value.length === 0 || !multiple) {\n      return null;\n    }\n    const narration = getA11ySelectionMessage.itemsCount(value.length);\n    return (\n      <span id={id} className={dropdownSlotClassNames.itemsCount} style={screenReaderContainerStyles}>\n        {narration}\n      </span>\n    );\n  };\n  const renderItemsList = (\n    highlightedIndex: number,\n    toggleMenu: () => void,\n    selectItemAtIndex: (index: number) => void,\n    getMenuProps: (options?: GetMenuPropsOptions, otherOptions?: GetPropsCommonOptions) => any,\n    getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n  ) => {\n    const items = open ? renderItems(getItemProps) : [];\n    const { innerRef, ...accessibilityMenuProps } = getMenuProps({ refKey: 'innerRef' }, { suppressRefError: true });\n\n    // If it's just a selection, some attributes and listeners from Downshift input need to go on the menu list.\n    if (!search) {\n      const accessibilityInputProps = getInputProps();\n\n      accessibilityMenuProps['aria-activedescendant'] = accessibilityInputProps['aria-activedescendant'];\n      accessibilityMenuProps['onKeyDown'] = e => {\n        handleListKeyDown(e, highlightedIndex, accessibilityInputProps['onKeyDown'], toggleMenu, selectItemAtIndex);\n      };\n    }\n\n    return (\n      <Ref\n        innerRef={(listElement: HTMLElement) => {\n          handleRef(listRef, listElement);\n          handleRef(innerRef, listElement);\n        }}\n      >\n        <Popper\n          rtl={context.rtl}\n          enabled={open}\n          targetRef={containerRef}\n          positioningDependencies={[items.length]}\n          // positioning props:\n          align={align}\n          flipBoundary={flipBoundary}\n          overflowBoundary={overflowBoundary}\n          popperRef={popperRef}\n          position={position}\n          positionFixed={positionFixed}\n          offset={offset}\n          unstable_disableTether={unstable_disableTether}\n          unstable_pinned={unstable_pinned}\n          autoSize={autoSize}\n          {...positioningProps}\n        >\n          {List.create(list, {\n            defaultProps: () => ({\n              className: dropdownSlotClassNames.itemsList,\n              ...accessibilityMenuProps,\n              styles: resolvedStyles.list,\n              items,\n              tabIndex: search ? undefined : -1, // needs to be focused when trigger button is activated.\n              'aria-hidden': !open,\n            }),\n\n            overrideProps: (predefinedProps: ListProps) => ({\n              onFocus: (e: React.SyntheticEvent<HTMLElement>, listProps: ListProps) => {\n                handleTriggerButtonOrListFocus();\n                _.invoke(predefinedProps, 'onClick', e, listProps);\n              },\n              onBlur: (e: React.SyntheticEvent<HTMLElement>, listProps: ListProps) => {\n                handleListBlur(e);\n                _.invoke(predefinedProps, 'onBlur', e, listProps);\n              },\n            }),\n          })}\n        </Popper>\n      </Ref>\n    );\n  };\n\n  const renderItems = (getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any) => {\n    const footerItem = renderItemsListFooter();\n    const headerItem = renderItemsListHeader();\n\n    const items = _.map(filteredItems, (item, index) => ({\n      children: () => {\n        const selected = value.indexOf(item) !== -1;\n\n        return DropdownItem.create(item, {\n          defaultProps: () => ({\n            className: dropdownSlotClassNames.item,\n            active: highlightedIndex === index,\n            selected,\n            checkable,\n            checkableIndicator,\n            isFromKeyboard: itemIsFromKeyboard,\n            variables,\n            ...(typeof item === 'object' &&\n              !item.hasOwnProperty('key') && {\n                key: (item as any).header,\n              }),\n          }),\n          overrideProps: handleItemOverrides(item, index, getItemProps, selected),\n          render: renderItem,\n        });\n      },\n    }));\n\n    if (footerItem) {\n      items.push(footerItem);\n    }\n\n    return headerItem ? [headerItem, ...items] : items;\n  };\n\n  const renderItemsListHeader = () => {\n    if (headerMessage) {\n      return {\n        children: () =>\n          DropdownItem.create(headerMessage, {\n            defaultProps: () => ({\n              key: 'items-list-footer-message',\n              styles: resolvedStyles.headerMessage,\n            }),\n          }),\n      };\n    }\n\n    return null;\n  };\n\n  const renderItemsListFooter = () => {\n    if (loading) {\n      return {\n        children: () =>\n          DropdownItem.create(loadingMessage, {\n            defaultProps: () => ({\n              key: 'loading-message',\n              styles: resolvedStyles.loadingMessage,\n            }),\n          }),\n      };\n    }\n\n    if (filteredItems && filteredItems.length === 0) {\n      return {\n        children: () =>\n          DropdownItem.create(noResultsMessage, {\n            defaultProps: () => ({\n              key: 'no-results-message',\n              styles: resolvedStyles.noResultsMessage,\n            }),\n          }),\n      };\n    }\n\n    return null;\n  };\n\n  const selectedItemsCountNarration = renderSelectedItemsCountNarration(selectedItemsCountNarrationId);\n  const renderSelectedItems = () => {\n    if (value.length === 0) {\n      return null;\n    }\n\n    const selectedItems = value.map((item: DropdownItemProps, index) =>\n      // (!) an item matches DropdownItemProps\n      DropdownSelectedItem.create(item, {\n        defaultProps: () => ({\n          className: dropdownSlotClassNames.selectedItem,\n          active: isSelectedItemActive(index),\n          variables,\n          ...(typeof item === 'object' &&\n            !item.hasOwnProperty('key') && {\n              key: (item as any).header,\n            }),\n        }),\n        overrideProps: handleSelectedItemOverrides(item),\n        render: renderSelectedItem,\n      }),\n    );\n    return (\n      <>\n        <div role=\"listbox\" tabIndex={-1} aria-label={a11ySelectedItemsMessage}>\n          {selectedItems}\n        </div>\n        {selectedItemsCountNarration}\n      </>\n    );\n  };\n\n  const downshiftStateReducer = (\n    state: DownshiftState<ShorthandValue<DropdownItemProps>>,\n    changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>,\n  ) => {\n    const activeElement: Element = context.target.activeElement;\n\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.blurButton:\n        // Downshift closes the list by default on trigger blur. It does not support the case when dropdown is\n        // single selection and focuses list on trigger click/up/down/space/enter. Treating that here.\n        if (state.isOpen && activeElement === listRef.current) {\n          return {}; // won't change state in this case.\n        }\n        _.invoke(props, 'onBlur', null);\n      default:\n        return changes;\n    }\n  };\n\n  const handleInputValueChange = (\n    inputValue: string,\n    stateAndHelpers: ControllerStateAndHelpers<ShorthandValue<DropdownItemProps>>,\n  ) => {\n    const itemSelected = stateAndHelpers.selectedItem && inputValue === itemToString(stateAndHelpers.selectedItem);\n    if (\n      inputValue !== searchQuery &&\n      !itemSelected // when item is selected, `handleStateChange` will update searchQuery.\n    ) {\n      setStateAndInvokeHandler(['onSearchQueryChange'], null, {\n        searchQuery: inputValue,\n      });\n    }\n  };\n\n  const handleStateChange = (changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>) => {\n    const { type } = changes;\n    const newState = {} as DropdownStateForInvoke;\n\n    switch (type) {\n      case Downshift.stateChangeTypes.changeInput: {\n        const shouldValueChange = changes.inputValue === '' && !multiple && value.length > 0;\n\n        newState.highlightedIndex = highlightFirstItemOnOpen ? 0 : null;\n\n        if (shouldValueChange) {\n          newState.value = [];\n        }\n\n        if (open) {\n          // we clear value when in single selection user cleared the query.\n          const shouldMenuClose = changes.inputValue === '' || changes.selectedItem !== undefined;\n\n          if (shouldMenuClose) {\n            newState.open = false;\n          }\n        } else {\n          newState.open = true;\n        }\n\n        break;\n      }\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        const shouldAddHighlightedIndex = !multiple && items && items.length > 0;\n        const isSameItemSelected = changes.selectedItem === undefined;\n        const newValue = isSameItemSelected ? value[0] : changes.selectedItem;\n\n        newState.searchQuery = getSelectedItemAsString(newValue);\n        newState.open = false;\n        newState.highlightedIndex = shouldAddHighlightedIndex ? items.indexOf(newValue) : null;\n\n        if (!isSameItemSelected) {\n          newState.value = multiple ? [...value, changes.selectedItem] : [changes.selectedItem];\n\n          if (getA11ySelectionMessage && getA11ySelectionMessage.onAdd) {\n            setA11ySelectionMessage(getA11ySelectionMessage.onAdd(newValue));\n          }\n        }\n\n        if (multiple) {\n          context.target?.defaultView.setTimeout(\n            () => (selectedItemsRef.current.scrollTop = selectedItemsRef.current.scrollHeight),\n            0,\n          );\n        }\n\n        // timeout because of NVDA, otherwise it narrates old button value/state\n        context.target?.defaultView.setTimeout(() => tryFocusTriggerButton(), 100);\n\n        break;\n      case Downshift.stateChangeTypes.keyDownEscape:\n        if (search && !multiple) {\n          newState.value = [];\n        }\n        newState.open = false;\n        newState.highlightedIndex = highlightFirstItemOnOpen ? 0 : null;\n        break;\n      case Downshift.stateChangeTypes.keyDownArrowDown:\n      case Downshift.stateChangeTypes.keyDownArrowUp:\n        if (changes.isOpen !== undefined) {\n          newState.open = changes.isOpen;\n          newState.highlightedIndex = changes.highlightedIndex;\n\n          if (changes.isOpen) {\n            const highlightedIndexOnArrowKeyOpen = getHighlightedIndexOnArrowKeyOpen(changes);\n\n            if (_.isNumber(highlightedIndexOnArrowKeyOpen)) {\n              newState.highlightedIndex = highlightedIndexOnArrowKeyOpen;\n            }\n\n            if (!search) {\n              listRef.current.focus();\n            }\n          } else {\n            newState.highlightedIndex = null;\n          }\n        }\n      case Downshift.stateChangeTypes['keyDownHome']:\n      case Downshift.stateChangeTypes['keyDownEnd']:\n        if (open && _.isNumber(changes.highlightedIndex)) {\n          newState.highlightedIndex = changes.highlightedIndex;\n          newState.itemIsFromKeyboard = true;\n        }\n\n        break;\n      case Downshift.stateChangeTypes.mouseUp:\n        if (open) {\n          newState.open = false;\n          newState.highlightedIndex = null;\n        }\n\n        break;\n      case Downshift.stateChangeTypes.clickButton:\n      case Downshift.stateChangeTypes.keyDownSpaceButton:\n        newState.open = changes.isOpen;\n        newState.itemIsFromKeyboard = isFromKeyboard;\n\n        if (changes.isOpen) {\n          const highlightedIndexOnArrowKeyOpen = getHighlightedIndexOnArrowKeyOpen(changes);\n\n          if (_.isNumber(highlightedIndexOnArrowKeyOpen)) {\n            newState.highlightedIndex = highlightedIndexOnArrowKeyOpen;\n          }\n\n          if (!search) {\n            listRef.current.focus();\n          }\n        } else {\n          newState.highlightedIndex = null;\n        }\n        break;\n      case Downshift.stateChangeTypes.itemMouseEnter:\n        newState.highlightedIndex = changes.highlightedIndex;\n        newState.itemIsFromKeyboard = false;\n        break;\n      case Downshift.stateChangeTypes.unknown:\n        if (changes.selectedItem) {\n          newState.value = multiple ? [...value, changes.selectedItem] : [changes.selectedItem];\n          newState.searchQuery = multiple ? '' : changes.inputValue;\n          newState.open = false;\n          newState.highlightedIndex = changes.highlightedIndex;\n\n          tryFocusTriggerButton();\n        } else {\n          newState.open = changes.isOpen;\n        }\n      default:\n        break;\n    }\n\n    if (_.isEmpty(newState)) {\n      return;\n    }\n\n    const handlers: (keyof DropdownProps)[] = [\n      newState.highlightedIndex !== undefined && 'onHighlightedIndexChange',\n      newState.open !== undefined && 'onOpenChange',\n      newState.searchQuery !== undefined && 'onSearchQueryChange',\n      newState.value !== undefined && 'onChange',\n    ].filter(Boolean) as (keyof DropdownProps)[];\n\n    setStateAndInvokeHandler(handlers, null, newState);\n  };\n\n  const isSelectedItemActive = (index: number): boolean => {\n    return index === activeSelectedIndex;\n  };\n\n  const handleItemOverrides = (\n    item: ShorthandValue<DropdownItemProps>,\n    index: number,\n    getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any,\n    selected: boolean,\n  ) => (predefinedProps: DropdownItemProps) => ({\n    accessibilityItemProps: {\n      ...getItemProps({\n        item,\n        index,\n        disabled: item['disabled'],\n        onClick: e => {\n          e.stopPropagation();\n          e.nativeEvent.stopImmediatePropagation();\n          _.invoke(predefinedProps, 'onClick', e, predefinedProps);\n        },\n      }),\n      // for single selection the selected item should have aria-selected, instead of the highlighted\n      ...(!multiple && {\n        'aria-selected': selected,\n      }),\n    },\n  });\n\n  const handleSelectedItemOverrides = (item: ShorthandValue<DropdownItemProps>) => (\n    predefinedProps: DropdownSelectedItemProps,\n  ) => ({\n    onRemove: (e: React.SyntheticEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      handleSelectedItemRemove(e, item, predefinedProps, dropdownSelectedItemProps);\n    },\n    onClick: (e: React.SyntheticEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n        activeSelectedIndex: value.indexOf(item),\n      });\n      e.stopPropagation();\n      _.invoke(predefinedProps, 'onClick', e, dropdownSelectedItemProps);\n    },\n    onKeyDown: (e: React.KeyboardEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      handleSelectedItemKeyDown(e, item, predefinedProps, dropdownSelectedItemProps);\n    },\n  });\n\n  const handleSearchInputOverrides = (\n    highlightedIndex: number,\n    selectItemAtIndex: (index: number, otherStateToSet?: Partial<StateChangeOptions<any>>, cb?: () => void) => void,\n    toggleMenu: () => void,\n    accessibilityComboboxProps: Object,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n  ) => (predefinedProps: DropdownSearchInputProps) => {\n    const handleInputBlur = (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n      if (!disabled) {\n        setFocused(false);\n        setIsFromKeyboard(detectIsFromKeyboard());\n\n        e.nativeEvent['preventDownshiftDefault'] = true;\n      }\n\n      _.invoke(predefinedProps, 'onInputBlur', e, searchInputProps);\n    };\n\n    const handleInputKeyDown = (\n      e: React.KeyboardEvent<HTMLInputElement>,\n      searchInputProps: DropdownSearchInputProps,\n    ) => {\n      if (!disabled) {\n        switch (getCode(e)) {\n          // https://github.com/downshift-js/downshift/issues/1097\n          // Downshift skips Home/End if Deopdown is opened\n          case keyboardKey.Home:\n            e.nativeEvent['preventDownshiftDefault'] = filteredItems.length === 0;\n            break;\n          case keyboardKey.End:\n            e.nativeEvent['preventDownshiftDefault'] = filteredItems.length === 0;\n            break;\n          case keyboardKey.Tab:\n            e.stopPropagation();\n            handleTabSelection(e, highlightedIndex, selectItemAtIndex, toggleMenu);\n            break;\n          case keyboardKey.ArrowLeft:\n            e.stopPropagation();\n            if (!context.rtl) {\n              trySetLastSelectedItemAsActive();\n            }\n            break;\n          case keyboardKey.ArrowRight:\n            e.stopPropagation();\n            if (context.rtl) {\n              trySetLastSelectedItemAsActive();\n            }\n            break;\n          case keyboardKey.Backspace:\n            e.stopPropagation();\n            tryRemoveItemFromValue();\n            break;\n          case keyboardKey.Escape:\n            // If dropdown list is open ESC should close it and not propagate to the parent\n            // otherwise event should propagate\n            if (open) {\n              e.stopPropagation();\n            }\n          default:\n            break;\n        }\n      }\n\n      _.invoke(predefinedProps, 'onInputKeyDown', e, {\n        ...searchInputProps,\n        highlightedIndex,\n        selectItemAtIndex,\n      });\n    };\n\n    return {\n      // getInputProps adds Downshift handlers. We also add our own by passing them as params to that function.\n      // user handlers were also added to our handlers previously, at the beginning of this function.\n      accessibilityInputProps: {\n        ...getInputProps({\n          disabled,\n          onBlur: e => {\n            handleInputBlur(e, predefinedProps);\n          },\n          onKeyDown: e => {\n            handleInputKeyDown(e, predefinedProps);\n          },\n          onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n            // we prevent the onChange input event to bubble up to our Dropdown handler,\n            // since in Dropdown it gets handled as onSearchQueryChange.\n            e.stopPropagation();\n\n            // A state modification should be triggered there otherwise it will go to an another frame and will break\n            // cursor position:\n            // https://github.com/facebook/react/issues/955#issuecomment-469352730\n            setSearchQuery(e.target.value);\n          },\n          'aria-labelledby': ariaLabelledby,\n          'aria-describedby': ariaDescribedby || selectedItemsCountNarrationId,\n        }),\n      },\n      // same story as above for getRootProps.\n      accessibilityComboboxProps,\n\n      inputRef: (node: HTMLInputElement) => {\n        handleRef(predefinedProps.inputRef, node);\n        inputRef.current = node;\n      },\n      onFocus: (e: React.FocusEvent, searchInputProps: DropdownSearchInputProps) => {\n        if (!disabled) {\n          setFocused(true);\n          setIsFromKeyboard(detectIsFromKeyboard());\n        }\n\n        _.invoke(predefinedProps, 'onFocus', e, searchInputProps);\n      },\n      onInputBlur: (e: React.FocusEvent, searchInputProps: DropdownSearchInputProps) => {\n        handleInputBlur(e, searchInputProps);\n      },\n      onInputKeyDown: (e: React.KeyboardEvent<HTMLInputElement>, searchInputProps: DropdownSearchInputProps) => {\n        handleInputKeyDown(e, searchInputProps);\n      },\n    };\n  };\n\n  /**\n   * Custom Tab selection logic, at least until Downshift will implement selection on blur.\n   * Also keeps focus on multiple selection dropdown when selecting by Tab.\n   */\n  const handleTabSelection = (\n    e: React.SyntheticEvent,\n    highlightedIndex: number,\n    selectItemAtIndex: (highlightedIndex: number) => void,\n    toggleMenu: () => void,\n  ): void => {\n    if (open) {\n      if (!_.isNil(highlightedIndex) && filteredItems.length && !items[highlightedIndex]['disabled']) {\n        selectItemAtIndex(highlightedIndex);\n\n        if (multiple && !moveFocusOnTab) {\n          e.preventDefault();\n        }\n      } else {\n        toggleMenu();\n      }\n    }\n  };\n\n  const trySetLastSelectedItemAsActive = () => {\n    if (!multiple || (inputRef.current && inputRef.current.selectionStart !== 0)) {\n      return;\n    }\n\n    if (value.length > 0) {\n      // If last element was already active, perform a 'reset' of activeSelectedIndex.\n      if (activeSelectedIndex === value.length - 1) {\n        setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n          activeSelectedIndex: value.length - 1,\n        });\n      } else {\n        setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n          activeSelectedIndex: value.length - 1,\n        });\n      }\n    }\n  };\n\n  const tryRemoveItemFromValue = () => {\n    if (\n      multiple &&\n      (searchQuery === '' || (inputRef.current.selectionStart === 0 && inputRef.current.selectionEnd === 0)) &&\n      value.length > 0\n    ) {\n      removeItemFromValue();\n    }\n  };\n\n  const handleClear = (e: React.SyntheticEvent<HTMLElement>) => {\n    setStateAndInvokeHandler(['onChange', 'onActiveSelectedIndexChange', 'onHighlightedIndexChange'], e, {\n      activeSelectedIndex: multiple ? null : undefined,\n      highlightedIndex: highlightFirstItemOnOpen ? 0 : null,\n      open: false,\n      searchQuery: search ? '' : undefined,\n      value: [],\n    });\n\n    tryFocusSearchInput();\n    tryFocusTriggerButton();\n  };\n\n  const handleContainerClick = () => {\n    tryFocusSearchInput();\n  };\n\n  const handleTriggerButtonKeyDown = (e: React.KeyboardEvent) => {\n    switch (getCode(e)) {\n      case keyboardKey.ArrowLeft:\n        if (!context.rtl) {\n          trySetLastSelectedItemAsActive();\n        }\n        return;\n      case keyboardKey.ArrowRight:\n        if (context.rtl) {\n          trySetLastSelectedItemAsActive();\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  const handleListKeyDown = (\n    e: React.KeyboardEvent,\n    highlightedIndex: number,\n    accessibilityInputPropsKeyDown: (e) => any,\n    toggleMenu: () => void,\n    selectItemAtIndex: (index: number) => void,\n  ) => {\n    const keyCode = getCode(e);\n    switch (keyCode) {\n      case keyboardKey.Tab:\n        handleTabSelection(e, highlightedIndex, selectItemAtIndex, toggleMenu);\n        return;\n      case keyboardKey.Escape:\n        accessibilityInputPropsKeyDown(e);\n        tryFocusTriggerButton();\n        e.stopPropagation();\n        return;\n      default:\n        const keyString = String.fromCharCode(keyCode);\n        if (/[a-zA-Z0-9]/.test(keyString)) {\n          setHighlightedIndexOnCharKeyDown(keyString);\n        }\n        accessibilityInputPropsKeyDown(e);\n        return;\n    }\n  };\n\n  const handleSelectedItemKeyDown = (\n    e: React.KeyboardEvent,\n    item: ShorthandValue<DropdownItemProps>,\n    predefinedProps: DropdownSelectedItemProps,\n    dropdownSelectedItemProps: DropdownSelectedItemProps,\n  ) => {\n    const previousKey = context.rtl ? keyboardKey.ArrowRight : keyboardKey.ArrowLeft;\n    const nextKey = context.rtl ? keyboardKey.ArrowLeft : keyboardKey.ArrowRight;\n\n    switch (getCode(e)) {\n      case keyboardKey.Delete:\n      case keyboardKey.Backspace:\n        handleSelectedItemRemove(e, item, predefinedProps, dropdownSelectedItemProps);\n        break;\n      case previousKey:\n        if (value.length > 0 && !_.isNil(activeSelectedIndex) && activeSelectedIndex > 0) {\n          setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n            activeSelectedIndex: activeSelectedIndex - 1,\n          });\n        }\n        break;\n      case nextKey:\n        if (value.length > 0 && !_.isNil(activeSelectedIndex)) {\n          if (activeSelectedIndex < value.length - 1) {\n            setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n              activeSelectedIndex: activeSelectedIndex + 1,\n            });\n          } else {\n            setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n              activeSelectedIndex: null,\n            });\n\n            if (search) {\n              e.preventDefault(); // prevents caret to forward one position in input.\n              inputRef.current.focus();\n            } else {\n              buttonRef.current.focus();\n            }\n          }\n        }\n        break;\n      default:\n        break;\n    }\n    _.invoke(predefinedProps, 'onKeyDown', e, dropdownSelectedItemProps);\n  };\n\n  const handleTriggerButtonOrListFocus = () => {\n    setFocused(true);\n    setIsFromKeyboard(detectIsFromKeyboard());\n  };\n\n  const handleTriggerButtonBlur = e => {\n    if (listRef.current !== e.relatedTarget) {\n      setFocused(false);\n      setIsFromKeyboard(detectIsFromKeyboard());\n    }\n  };\n\n  const handleListBlur = e => {\n    if (buttonRef.current !== e.relatedTarget) {\n      setFocused(false);\n      setIsFromKeyboard(detectIsFromKeyboard());\n    }\n  };\n\n  /**\n   * Sets highlightedIndex to be the item that starts with the character keys the\n   * user has typed. Only used in non-search dropdowns.\n   *\n   * @param keystring - The string the item needs to start with. It is composed by typing keys in fast succession.\n   */\n  const setHighlightedIndexOnCharKeyDown = (keyString: string): void => {\n    const newStartingString = `${startingString}${keyString.toLowerCase()}`;\n    let newHighlightedIndex = -1;\n\n    setStartingString(newStartingString);\n    clearStartingString();\n\n    if (_.isNumber(highlightedIndex)) {\n      newHighlightedIndex = _.findIndex(\n        filteredItemStrings,\n        item => item.startsWith(newStartingString),\n        highlightedIndex + (startingString.length > 0 ? 0 : 1),\n      );\n    }\n\n    if (newHighlightedIndex < 0) {\n      newHighlightedIndex = _.findIndex(filteredItemStrings, item => item.startsWith(newStartingString));\n    }\n\n    if (newHighlightedIndex >= 0) {\n      setStateAndInvokeHandler(['onHighlightedIndexChange'], null, {\n        highlightedIndex: newHighlightedIndex,\n      });\n    }\n  };\n\n  const handleSelectedItemRemove = (\n    e: React.SyntheticEvent,\n    item: ShorthandValue<DropdownItemProps>,\n    predefinedProps: DropdownSelectedItemProps,\n    dropdownSelectedItemProps: DropdownSelectedItemProps,\n  ) => {\n    setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n      activeSelectedIndex: null,\n    });\n    removeItemFromValue(item);\n    tryFocusSearchInput();\n    tryFocusTriggerButton();\n    _.invoke(predefinedProps, 'onRemove', e, dropdownSelectedItemProps);\n  };\n\n  const removeItemFromValue = (item?: ShorthandValue<DropdownItemProps>) => {\n    let poppedItem = item;\n    let newValue = [...value];\n\n    if (poppedItem) {\n      newValue = newValue.filter(currentElement => currentElement !== item);\n    } else {\n      poppedItem = newValue.pop();\n    }\n\n    if (getA11ySelectionMessage && getA11ySelectionMessage.onRemove) {\n      setA11ySelectionMessage(getA11ySelectionMessage.onRemove(poppedItem));\n    }\n\n    setStateAndInvokeHandler(['onChange'], null, { value: newValue });\n  };\n\n  /**\n   * Calls setState and invokes event handler exposed to user.\n   * We don't have the event object for most events coming from Downshift se we send an empty event\n   * because we want to keep the event handling interface\n   */\n  const setStateAndInvokeHandler = (\n    handlerNames: (keyof DropdownProps)[],\n    event: React.SyntheticEvent<HTMLElement>,\n    newState: DropdownStateForInvoke,\n  ) => {\n    const proposedValue = _.isNil(newState.value) ? value : newState.value;\n    // `proposedValue` should be normalized for single/multiple variations, `null` condition is\n    // required as first item can be undefined\n    const newValue = multiple ? proposedValue : proposedValue[0] || null;\n\n    if (newState.hasOwnProperty('activeSelectedIndex')) {\n      setActiveSelectedIndex(newState.activeSelectedIndex);\n    }\n    if (newState.hasOwnProperty('highlightedIndex')) {\n      setHighlightedIndex(newState.highlightedIndex);\n    }\n    if (newState.hasOwnProperty('itemIsFromKeyboard')) {\n      setItemIsFromKeyboard(newState.itemIsFromKeyboard);\n    }\n    if (newState.hasOwnProperty('open')) {\n      setOpen(newState.open);\n    }\n    if (newState.hasOwnProperty('searchQuery')) {\n      setSearchQuery(newState.searchQuery);\n    }\n    if (newState.hasOwnProperty('value')) {\n      setValue(newState.value);\n    }\n\n    handlerNames.forEach(handlerName => {\n      _.invoke(props, handlerName, event, { ...props, ...newState, value: newValue });\n    });\n  };\n\n  const tryFocusTriggerButton = () => {\n    if (!search && buttonRef.current) {\n      buttonRef.current.focus();\n    }\n  };\n\n  const tryFocusSearchInput = () => {\n    if (search && inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  /**\n   * If there is no value we use the placeholder value\n   * otherwise, for single selection we convert the value with itemToString\n   * and for multiple selection we return empty string, the values are rendered by renderSelectedItems\n   */\n  const getSelectedItemAsString = (value: ShorthandValue<DropdownItemProps>): string => {\n    if (!value) {\n      return search ? '' : placeholder;\n    }\n\n    if (multiple) {\n      return '';\n    }\n\n    return itemToString(value);\n  };\n\n  const getHighlightedIndexOnArrowKeyOpen = (\n    changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>,\n  ): number => {\n    const isArrowUp = changes.type === Downshift.stateChangeTypes.keyDownArrowUp;\n    const isArrowDown = changes.type === Downshift.stateChangeTypes.keyDownArrowDown;\n    const itemsLength = filteredItems.length;\n\n    if (highlightedIndex) {\n      return highlightedIndex;\n    }\n\n    if (highlightFirstItemOnOpen) {\n      // otherwise, if highlightFirstItemOnOpen prop is provied, highlight first item.\n      return 0;\n    }\n\n    if (!multiple && !search && value.length > 0) {\n      // in single selection, if there is a selected item, highlight it.\n      const offset = isArrowUp ? -1 : isArrowDown ? 1 : 0;\n      const newHighlightedIndex = items.indexOf(value[0]) + offset;\n      if (newHighlightedIndex >= itemsLength) {\n        return 0;\n      }\n      if (newHighlightedIndex < 0) {\n        return itemsLength - 1;\n      }\n      return newHighlightedIndex;\n    }\n\n    if (isArrowDown) {\n      return 0;\n    }\n    if (isArrowUp) {\n      return itemsLength - 1;\n    }\n\n    return null;\n  };\n\n  /**\n   * Function that sets and cleans the selection message after it has been set,\n   * so it is not read anymore via virtual cursor.\n   */\n  const setA11ySelectionMessage = (a11ySelectionStatus: string): void => {\n    setA11ySelectionStatus(a11ySelectionStatus);\n    clearA11ySelectionMessage();\n  };\n\n  React.useEffect(() => {\n    return () => {\n      clearStartingString.cancel();\n      clearA11ySelectionMessage.cancel();\n    };\n  }, [clearA11ySelectionMessage, clearStartingString]);\n\n  const element = (\n    <ElementType\n      className={classes.root}\n      onBlur={handleOnBlur}\n      onChange={handleChange}\n      ref={ref}\n      {...unhandledProps}\n      {...(process.env.NODE_ENV === 'test' && { 'data-test-focused': focused })}\n    >\n      <Downshift\n        isOpen={open}\n        inputValue={search ? searchQuery : null}\n        stateReducer={downshiftStateReducer}\n        itemToString={itemToString}\n        // downshift does not work with arrays as selectedItem.\n        selectedItem={multiple || !value.length ? null : value[0]}\n        scrollIntoView={(node: HTMLElement, menu: HTMLElement) => {\n          if (node) {\n            const { children } = menu;\n            let nodeToScroll = node;\n            /**\n             * If it's loading downshift doesn't take the last node with loadingMessage\n             * in consideration to scrolld so we need to check if the current is the\n             * antepenultimate and is so scroll the loading into view, same for headerMessage\n             */\n            if (loading && children[children.length - 2] === node) {\n              nodeToScroll = children[children.length - 1] as HTMLElement;\n            } else if (headerMessage && children[1] === node) {\n              nodeToScroll = children[0] as HTMLElement;\n            }\n\n            // Replicating same config that Downshift uses\n            const actions = computeScrollIntoView(nodeToScroll, {\n              boundary: menu, // Explicitly set boundary to avoid unnecessary scrolling by checking all parent elements\n              scrollMode: 'if-needed',\n              block: 'nearest',\n              inline: 'nearest',\n            });\n            actions.forEach(({ el, top, left }) => {\n              el.scrollTop = top;\n              el.scrollLeft = left;\n            });\n          }\n        }}\n        getA11yStatusMessage={getA11yStatusMessage}\n        highlightedIndex={highlightedIndex}\n        onStateChange={handleStateChange}\n        onInputValueChange={handleInputValueChange}\n        labelId={ariaLabelledby}\n        environment={context.target?.defaultView}\n        inputId={searchInput && searchInput['id'] ? searchInput['id'] : undefined}\n      >\n        {({\n          getInputProps,\n          getItemProps,\n          getMenuProps,\n          getRootProps,\n          getToggleButtonProps,\n          toggleMenu,\n          highlightedIndex,\n          selectItemAtIndex,\n        }) => {\n          const { innerRef, ...accessibilityRootPropsRest } = getRootProps(\n            { refKey: 'innerRef' },\n            { suppressRefError: true },\n          );\n          const showClearIndicator = clearable && value.length > 0;\n\n          return (\n            <Ref innerRef={innerRef}>\n              <div\n                ref={containerRef}\n                className={cx(dropdownSlotClassNames.container, classes.container)}\n                onClick={search && !open ? handleContainerClick : undefined}\n              >\n                <div ref={selectedItemsRef} className={cx(dropdownSlotClassNames.selectedItems, classes.selectedItems)}>\n                  {/* We previously were rendering the trigger button after selected items list,\n                    after listbox wrapper was introduced we moved it to before and\n                     set as absolute to avoid visual regressions   */}\n                  {!search && renderTriggerButton(getToggleButtonProps)}\n                  {multiple && renderSelectedItems()}\n                  {search &&\n                    renderSearchInput(\n                      accessibilityRootPropsRest,\n                      highlightedIndex,\n                      getInputProps,\n                      selectItemAtIndex,\n                      toggleMenu,\n                      variables,\n                    )}\n                </div>\n                {showClearIndicator\n                  ? Box.create(clearIndicator, {\n                      defaultProps: () => ({\n                        className: dropdownSlotClassNames.clearIndicator,\n                        styles: resolvedStyles.clearIndicator,\n                        accessibility: indicatorBehavior,\n                        ...(!search && { tabIndex: 0, role: 'button' }),\n                      }),\n                      overrideProps: (predefinedProps: BoxProps) => ({\n                        onClick: (e: React.SyntheticEvent<HTMLElement>) => {\n                          _.invoke(predefinedProps, 'onClick', e);\n                          handleClear(e);\n                        },\n                      }),\n                    })\n                  : Box.create(toggleIndicator, {\n                      defaultProps: () => ({\n                        className: dropdownSlotClassNames.toggleIndicator,\n                        styles: resolvedStyles.toggleIndicator,\n                        accessibility: indicatorBehavior,\n                      }),\n                      overrideProps: (predefinedProps: BoxProps) => ({\n                        onClick: e => {\n                          if (!disabled) {\n                            getToggleButtonProps({ disabled }).onClick(e);\n                          }\n\n                          _.invoke(predefinedProps, 'onClick', e);\n                        },\n                      }),\n                    })}\n                {renderItemsList(\n                  highlightedIndex,\n                  toggleMenu,\n                  selectItemAtIndex,\n                  getMenuProps,\n                  getItemProps,\n                  getInputProps,\n                )}\n              </div>\n            </Ref>\n          );\n        }}\n      </Downshift>\n      <Portal open={!!getA11ySelectionMessage}>\n        <div role=\"status\" aria-live=\"polite\" aria-relevant=\"additions text\" style={screenReaderContainerStyles}>\n          {a11ySelectionStatus}\n        </div>\n      </Portal>\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n}) as unknown) as ForwardRefWithAs<'div', HTMLDivElement, DropdownProps> &\n  FluentComponentStaticProps<DropdownProps> & {\n    Item: typeof DropdownItem;\n    SearchInput: typeof DropdownSearchInput;\n    SelectedItem: typeof DropdownSelectedItem;\n  };\n\nDropdown.displayName = 'Dropdown';\n\nDropdown.propTypes = {\n  ...commonPropTypes.createCommon({\n    accessibility: false,\n    children: false,\n    content: false,\n  }),\n  activeSelectedIndex: PropTypes.number,\n  checkable: PropTypes.bool,\n  checkableIndicator: customPropTypes.shorthandAllowingChildren,\n  clearable: PropTypes.bool,\n  clearIndicator: customPropTypes.shorthandAllowingChildren,\n  defaultActiveSelectedIndex: PropTypes.number,\n  defaultOpen: PropTypes.bool,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultSearchQuery: PropTypes.string,\n  defaultValue: PropTypes.oneOfType([customPropTypes.itemShorthand, customPropTypes.collectionShorthand]),\n  disabled: PropTypes.bool,\n  error: PropTypes.bool,\n  fluid: PropTypes.bool,\n  getA11ySelectionMessage: PropTypes.object,\n  getA11yStatusMessage: PropTypes.func,\n  highlightFirstItemOnOpen: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  inline: PropTypes.bool,\n  inverted: PropTypes.bool,\n  items: customPropTypes.collectionShorthand,\n  itemToString: PropTypes.func,\n  itemToValue: PropTypes.func,\n  headerMessage: customPropTypes.itemShorthand,\n  list: customPropTypes.itemShorthand,\n  loading: PropTypes.bool,\n  loadingMessage: customPropTypes.itemShorthand,\n  moveFocusOnTab: PropTypes.bool,\n  multiple: PropTypes.bool,\n  noResultsMessage: customPropTypes.itemShorthand,\n  onOpenChange: PropTypes.func,\n  onSearchQueryChange: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onActiveSelectedIndexChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  open: PropTypes.bool,\n  placeholder: PropTypes.string,\n  renderItem: PropTypes.func,\n  renderSelectedItem: PropTypes.func,\n  search: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n  searchQuery: PropTypes.string,\n  searchInput: customPropTypes.itemShorthand,\n  toggleIndicator: customPropTypes.shorthandAllowingChildren,\n  triggerButton: customPropTypes.itemShorthand,\n  value: PropTypes.oneOfType([customPropTypes.itemShorthand, customPropTypes.collectionShorthand]),\n  'aria-labelledby': PropTypes.string,\n  'aria-invalid': PropTypes.bool,\n  a11ySelectedItemsMessage: PropTypes.string,\n  // positioning props\n  align: PropTypes.oneOf(ALIGNMENTS),\n  flipBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  overflowBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  popperRef: customPropTypes.ref,\n  position: PropTypes.oneOf(POSITIONS),\n  positionFixed: PropTypes.bool,\n  offset: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.arrayOf(PropTypes.number) as PropTypes.Requireable<[number, number]>,\n  ]),\n  unstable_disableTether: PropTypes.oneOf([true, false, 'all']),\n  unstable_pinned: PropTypes.bool,\n  autoSize: PropTypes.oneOf<AutoSize>(AUTOSIZES),\n};\nDropdown.handledProps = Object.keys(Dropdown.propTypes) as any;\n\nDropdown.defaultProps = {\n  align: 'start',\n  clearIndicator: <CloseIcon outline />,\n  itemToString: item => {\n    if (!item || React.isValidElement(item)) {\n      return '';\n    }\n\n    // targets DropdownItem shorthand objects\n    return (item as any).header || String(item);\n  },\n  itemToValue: item => {\n    if (!item || React.isValidElement(item)) {\n      return '';\n    }\n\n    // targets DropdownItem shorthand objects\n    return (item as any).header || String(item);\n  },\n  list: {},\n  position: 'below',\n  toggleIndicator: <ChevronDownIcon outline />,\n  triggerButton: {},\n};\n\nDropdown.Item = DropdownItem;\nDropdown.SearchInput = DropdownSearchInput;\nDropdown.SelectedItem = DropdownSelectedItem;\n"],"file":"Dropdown.js"}